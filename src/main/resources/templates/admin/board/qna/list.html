<!-- 📂 위치: templates/admin/board/qna/list.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Q&A 목록 | 온앤홈 관리자</title>
    <link rel="stylesheet" href="/css/import.css" />
    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            const tableBody = document.querySelector("#qna-list-body");
            try {
                const res = await fetch("/api/admin/qna");
                const qnaList = await res.json();
                tableBody.innerHTML = "";

                if (qnaList.length === 0) {
                    tableBody.innerHTML = `<tr><td colspan="4" class="center">등록된 Q&A가 없습니다.</td></tr>`;
                    return;
                }

                qnaList.forEach((qna, idx) => {
                    const row = `
                        <tr>
                            <td class="center">${idx + 1}</td>
                            <td class="center">
                                <a href="/admin/board/qna/${qna.id}">${qna.title}</a>
                            </td>
                            <td class="center">${qna.writer}</td>
                            <td class="center">${qna.createdAt.replace('T', ' ').slice(0, 16)}</td>
                        </tr>`;
                    tableBody.insertAdjacentHTML("beforeend", row);
                });
            } catch (err) {
                console.error("QnA 목록 로드 실패:", err);
            }
        });
    </script>
</head>
<body>
<div class="on-wrapper">
    <div class="on-content">
        <div th:replace="~{fragments/sidebar :: sidebar}"></div>
        <div class="on-main">
            <h2 class="mb-30">Q&A 게시판</h2>

            <div class="grid">
                <table>
                    <thead>
                    <tr>
                        <th>번호</th>
                        <th>제목</th>
                        <th>작성자</th>
                        <th>작성일자</th>
                    </tr>
                    </thead>
                    <tbody id="qna-list-body">
                    <tr><td colspan="4" class="center">로딩 중...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</body>
</html>
